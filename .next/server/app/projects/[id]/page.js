"use strict";(()=>{var e={};e.id=948,e.ids=[948],e.modules={53524:e=>{e.exports=require("@prisma/client")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22641:e=>{e.exports=require("assert")},78893:e=>{e.exports=require("buffer")},84770:e=>{e.exports=require("crypto")},17702:e=>{e.exports=require("events")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},86624:e=>{e.exports=require("querystring")},17360:e=>{e.exports=require("url")},21764:e=>{e.exports=require("util")},71568:e=>{e.exports=require("zlib")},91875:(e,t,r)=>{r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),r(37082),r(2723),r(12874);var s=r(27105),a=r(15265),n=r(90157),l=r.n(n),o=r(44665),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);r.d(t,i);let d=["",{children:["projects",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,37082)),"C:\\Users\\This PC\\Downloads\\new-project-main\\app\\projects\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2723)),"C:\\Users\\This PC\\Downloads\\new-project-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,12874,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\This PC\\Downloads\\new-project-main\\app\\projects\\[id]\\page.tsx"],m="/projects/[id]/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/projects/[id]/page",pathname:"/projects/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},37082:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u,dynamic:()=>x});var s=r(35023),a=r(19737),n=r(1130),l=r(4573),o=r(10682);function i(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);let s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-s.getTime())/864e5+1)/7)}function d(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}var c=r(48262),m=r(14389);let x="force-dynamic";async function u({params:e}){let t=await (0,c.getServerSession)(m.L);t?.user?.email||(0,a.redirect)("/login");let r=await n._.project.findUnique({where:{id:e.id},include:{milestones:{include:{weeklyProgress:{orderBy:{weekStartDate:"desc"}}}}}});r||(0,a.notFound)(),"manager"!==(t.user.role||"user")&&r.createdBy!==t.user.email&&(0,a.redirect)("/projects");let x=[...r.milestones].sort((e,t)=>e.isCurrent&&!t.isCurrent?-1:!e.isCurrent&&t.isCurrent?1:e.targetDate&&t.targetDate?new Date(e.targetDate).getTime()-new Date(t.targetDate).getTime():e.targetDate?-1:t.targetDate?1:new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),u=r.milestones.find(e=>e.isCurrent),p=0===new Date().getDay(),g=u?.weeklyProgress||[];return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[s.jsx(l.Z,{}),s.jsx("div",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6 lg:py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:(0,s.jsxs)(o.default,{href:"/projects",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4 font-medium transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Projects"]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8 border border-gray-100",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-6 gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 break-words",children:r.name}),s.jsx("span",{className:`px-3 sm:px-4 py-1.5 text-xs sm:text-sm font-semibold rounded-full whitespace-nowrap self-start ${"active"===r.status?"bg-green-100 text-green-800 border border-green-200":"completed"===r.status?"bg-gray-100 text-gray-800 border border-gray-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,children:r.status})]}),r.description&&s.jsx("p",{className:"text-gray-600 mb-4 sm:mb-6 text-base sm:text-lg leading-relaxed break-words",children:r.description}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 sm:p-6 border border-blue-100",children:[s.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wide",children:"Major Goal"}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-900 font-semibold leading-relaxed break-words",children:r.majorGoal})]})]}),(0,s.jsxs)(o.default,{href:`/projects/${r.id}/milestones/new`,className:"w-full sm:w-auto bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-xl hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-semibold flex items-center justify-center sm:ml-6",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{className:"hidden sm:inline",children:"Add Milestone"}),s.jsx("span",{className:"sm:hidden",children:"Add"})]})]})}),p&&u&&s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-xl p-4 sm:p-6 mb-6 sm:mb-8 text-white",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:"It's Sunday! Time to track weekly progress"}),s.jsx("p",{className:"text-blue-100 mb-4 text-sm sm:text-base",children:"Record what you completed last week and plan for next week."})]}),s.jsx(o.default,{href:`/weekly-progress/new?milestoneId=${u.id}`,className:"w-full sm:w-auto bg-white text-blue-600 px-6 py-3 rounded-xl hover:bg-gray-50 transition-colors font-semibold text-center sm:text-left",children:"Create Weekly Report"})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8 border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4 sm:mb-6 flex items-center",children:[s.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 mr-2 sm:mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Milestones"]}),0===x.length?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:"No milestones yet. Create one to get started."})}):s.jsx("div",{className:"space-y-4",children:x.map(e=>{let t=e.weeklyProgress.length;return(0,s.jsxs)("div",{className:`rounded-xl p-4 sm:p-6 border-2 transition-all duration-200 ${e.isCurrent?"border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md"}`,children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 flex-wrap",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 break-words",children:e.title}),e.isCurrent&&s.jsx("span",{className:"px-3 py-1 text-xs font-bold bg-blue-600 text-white rounded-full uppercase tracking-wide",children:"Current"}),s.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${"completed"===e.status?"bg-green-100 text-green-800 border border-green-200":"in-progress"===e.status?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:e.status})]}),e.description&&s.jsx("p",{className:"text-gray-600 mb-3 leading-relaxed",children:e.description}),e.targetDate&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mt-2",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Target: ",d(e.targetDate)]})]})}),e.isCurrent&&e.weeklyProgress.length>0&&(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,s.jsxs)("h4",{className:"text-sm font-bold text-gray-700 mb-4 uppercase tracking-wide",children:["Recent Weekly Progress (",t," total)"]}),s.jsx("div",{className:"grid gap-3",children:e.weeklyProgress.slice(0,3).map(e=>{let t=new Date(e.weekStartDate),r=new Date(e.weekEndDate),a=i(t),n=JSON.parse(e.completedThisWeek||"[]"),l=JSON.parse(e.plannedForNextWeek||"[]");return(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-bold text-gray-900 mb-1",children:["Week ",a,", ",t.getFullYear()]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[d(t)," - ",d(r)]})]}),s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${e.goalsAchieved?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:e.goalsAchieved?"✓ Achieved":"✗ Not Achieved"})]}),n.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Completed:"}),s.jsx("ul",{className:"text-sm text-gray-700 space-y-1",children:n.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),s.jsx("span",{children:e})]},t))})]}),l.length>0&&(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Planned:"}),s.jsx("ul",{className:"text-sm text-gray-700 space-y-1",children:l.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-500 mr-2",children:"→"}),s.jsx("span",{children:e})]},t))})]}),e.notes&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:s.jsx("p",{className:"text-sm text-gray-600 italic",children:e.notes})})]},e.id)})})]})]},e.id)})})]}),u&&g.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx("svg",{className:"w-8 h-8 mr-3 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Weekly Progress History"]}),s.jsx("div",{className:"grid gap-4",children:g.map(e=>{let t=new Date(e.weekStartDate),r=new Date(e.weekEndDate),a=i(t),n=JSON.parse(e.completedThisWeek||"[]"),l=JSON.parse(e.plannedForNextWeek||"[]");return(0,s.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 rounded-xl p-6 border border-gray-200 hover:shadow-lg transition-all duration-200",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-lg font-bold text-gray-900 mb-1",children:["Week ",a,", ",t.getFullYear()]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[d(t)," - ",d(r)]})]}),s.jsx("div",{className:`px-4 py-1.5 rounded-full text-sm font-semibold ${e.goalsAchieved?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:e.goalsAchieved?"✓ Goals Achieved":"✗ Goals Not Achieved"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[n.length>0&&(0,s.jsxs)("div",{children:[s.jsx("h5",{className:"text-sm font-bold text-gray-700 mb-2 uppercase tracking-wide",children:"Completed This Week"}),s.jsx("ul",{className:"space-y-2",children:n.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start text-sm text-gray-700",children:[s.jsx("span",{className:"text-green-500 mr-2 mt-0.5",children:"✓"}),s.jsx("span",{children:e})]},t))})]}),l.length>0&&(0,s.jsxs)("div",{children:[s.jsx("h5",{className:"text-sm font-bold text-gray-700 mb-2 uppercase tracking-wide",children:"Planned For Next Week"}),s.jsx("ul",{className:"space-y-2",children:l.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start text-sm text-gray-700",children:[s.jsx("span",{className:"text-blue-500 mr-2 mt-0.5",children:"→"}),s.jsx("span",{children:e})]},t))})]})]}),e.notes&&s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsx("p",{className:"text-sm text-gray-600 italic",children:e.notes})})]},e.id)})})]}),u&&0===g.length&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 text-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Weekly Progress History"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No weekly progress reports yet for the current milestone."}),s.jsx(o.default,{href:`/weekly-progress/new?milestoneId=${u.id}`,className:"inline-flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all font-semibold",children:"Create First Report"})]})]})})]})}},19737:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return l},RedirectType:function(){return s.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(81167),a=r(14440);class n extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class l extends URLSearchParams{append(){throw new n}delete(){throw new n}set(){throw new n}sort(){throw new n}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14440:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return a},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6550:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81167:(e,t,r)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return u},getURLFromRedirectError:function(){return x},isRedirectError:function(){return m},permanentRedirect:function(){return c},redirect:function(){return d}});let a=r(54580),n=r(72934),l=r(6550),o="NEXT_REDIRECT";function i(e,t,r){void 0===r&&(r=l.RedirectStatusCode.TemporaryRedirect);let s=Error(o);s.digest=o+";"+t+";"+e+";"+r+";";let n=a.requestAsyncStorage.getStore();return n&&(s.mutableCookies=n.mutableCookies),s}function d(e,t){void 0===t&&(t="replace");let r=n.actionAsyncStorage.getStore();throw i(e,t,(null==r?void 0:r.isAction)?l.RedirectStatusCode.SeeOther:l.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=n.actionAsyncStorage.getStore();throw i(e,t,(null==r?void 0:r.isAction)?l.RedirectStatusCode.SeeOther:l.RedirectStatusCode.PermanentRedirect)}function m(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,a]=e.digest.split(";",4),n=Number(a);return t===o&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(n)&&n in l.RedirectStatusCode}function x(e){return m(e)?e.digest.split(";",3)[2]:null}function u(e){if(!m(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!m(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[942,425,958,138,289],()=>r(91875));module.exports=s})();