(()=>{var e={};e.id=948,e.ids=[948],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22641:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},91875:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(48617),r(2723),r(12874);var s=r(27105),a=r(15265),o=r(90157),n=r.n(o),l=r(44665),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(t,i);let d=["",{children:["projects",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,48617)),"C:\\Users\\This PC\\Downloads\\new-project-main\\app\\projects\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2723)),"C:\\Users\\This PC\\Downloads\\new-project-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,12874,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\This PC\\Downloads\\new-project-main\\app\\projects\\[id]\\page.tsx"],u="/projects/[id]/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/projects/[id]/page",pathname:"/projects/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},85949:(e,t,r)=>{Promise.resolve().then(r.bind(r,59032)),Promise.resolve().then(r.bind(r,45675)),Promise.resolve().then(r.bind(r,18502)),Promise.resolve().then(r.bind(r,6043)),Promise.resolve().then(r.t.bind(r,50696,23))},59032:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var s=r(19899),a=r(5507),o=r(76153),n=r(28814);function l({milestoneId:e,currentStatus:t,canEdit:r}){let l=(0,o.useRouter)(),[i,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)({message:"",type:"info",isVisible:!1}),m=(e,t="info")=>{u({message:e,type:t,isVisible:!0})},x=async()=>{if("completed"===t){m("Milestone is already completed","info");return}d(!0);try{let t=await fetch(`/api/milestones/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})});if(t.ok)m("Milestone marked as completed!","success"),l.refresh();else{let e=await t.json();m(e.error||"Failed to update milestone","error")}}catch(e){console.error("Error updating milestone:",e),m("Error updating milestone","error")}finally{d(!1)}};return r&&"completed"!==t?(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:x,disabled:i,className:"px-3 py-1.5 text-xs sm:text-sm font-semibold text-green-600 bg-green-50 hover:bg-green-100 rounded-lg transition-colors whitespace-nowrap disabled:opacity-50",children:i?"Updating...":"Mark as Completed"}),s.jsx(n.Z,{message:c.message,type:c.type,isVisible:c.isVisible,onClose:()=>u({...c,isVisible:!1})})]}):null}},45675:(e,t,r)=>{"use strict";r.d(t,{default:()=>c});var s=r(19899),a=r(5507),o=r(76153),n=r(60878),l=r(28814),i=r(30578);function d({projectId:e,initialData:t,onClose:r,onSuccess:o}){let[n,l]=(0,a.useState)(t),[i,d]=(0,a.useState)(!1),c=async t=>{t.preventDefault(),d(!0);try{let t=await fetch(`/api/projects/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(t.ok)o("Project updated successfully!"),r();else{let e=await t.json();alert(e.error||"Failed to update project")}}catch(e){console.error("Error updating project:",e),alert("Error updating project")}finally{d(!1)}};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),(0,s.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Edit Project"}),(0,s.jsxs)("form",{onSubmit:c,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name *"}),s.jsx("input",{type:"text",required:!0,value:n.name,onChange:e=>l({...n,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{value:n.description,onChange:e=>l({...n,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Major Goal *"}),s.jsx("textarea",{required:!0,value:n.majorGoal,onChange:e=>l({...n,majorGoal:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,s.jsxs)("select",{value:n.status,onChange:e=>l({...n,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"completed",children:"Completed"}),s.jsx("option",{value:"on-hold",children:"On Hold"})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50",children:i?"Saving...":"Save Changes"})]})]})]})]})})}function c({projectId:e,projectName:t,projectDescription:r,projectMajorGoal:c,projectStatus:u,canEdit:m}){let x=(0,o.useRouter)(),{data:p}=(0,n.useSession)(),[g,h]=(0,a.useState)(!1),[b,f]=(0,a.useState)(!1),[j,y]=(0,a.useState)(!1),[v,w]=(0,a.useState)({message:"",type:"info",isVisible:!1}),N=(e,t="info")=>{w({message:e,type:t,isVisible:!0})},k=async()=>{y(!0);try{let t=await fetch(`/api/projects/${e}`,{method:"DELETE"});if(t.ok)N("Project deleted successfully!","success"),setTimeout(()=>{x.push("/projects")},1e3);else{let e=await t.json();N(e.error||"Failed to delete project","error"),f(!1)}}catch(e){console.error("Error deleting project:",e),N("Error deleting project","error"),f(!1)}finally{y(!1)}};return m?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold transition-colors text-sm sm:text-base",children:"Edit Project"}),s.jsx("button",{onClick:()=>f(!0),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 font-semibold transition-colors text-sm sm:text-base",children:"Delete Project"})]}),g&&s.jsx(d,{projectId:e,initialData:{name:t,description:r||"",majorGoal:c,status:u},onClose:()=>{h(!1),x.refresh()},onSuccess:e=>{N(e,"success"),x.refresh()}}),s.jsx(i.Z,{isOpen:b,title:"Delete Project",message:"Are you sure you want to delete this project? All milestones and related data will be deleted. This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",type:"danger",isLoading:j,onConfirm:k,onCancel:()=>f(!1)}),s.jsx(l.Z,{message:v.message,type:v.type,isVisible:v.isVisible,onClose:()=>w({...v,isVisible:!1})})]}):null}},18502:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(19899),a=r(5507),o=r(76153);function n({progressId:e,initialData:t,onClose:r,onSuccess:o}){let[n,l]=(0,a.useState)(t.completedThisWeek),[i,d]=(0,a.useState)(t.plannedForNextWeek),[c,u]=(0,a.useState)(t.goalsAchieved),[m,x]=(0,a.useState)(t.notes||""),[p,g]=(0,a.useState)(!1),h=e=>{l(n.filter((t,r)=>r!==e))},b=(e,t)=>{let r=[...n];r[e]=t,l(r)},f=e=>{d(i.filter((t,r)=>r!==e))},j=(e,t)=>{let r=[...i];r[e]=t,d(r)},y=async t=>{t.preventDefault(),g(!0);try{let t=await fetch(`/api/weekly-progress/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({completedThisWeek:JSON.stringify(n.filter(e=>""!==e.trim())),plannedForNextWeek:JSON.stringify(i.filter(e=>""!==e.trim())),goalsAchieved:c,notes:m.trim()||null})});if(t.ok)o("Weekly progress updated successfully!"),r();else{let e=await t.json();alert(e.error||"Failed to update weekly progress")}}catch(e){console.error("Error updating weekly progress:",e),alert("Error updating weekly progress")}finally{g(!1)}};return s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:r}),(0,s.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Edit Weekly Progress"}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Completed This Week"}),(0,s.jsxs)("div",{className:"space-y-2",children:[n.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:e=>b(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Task ${t+1}`}),s.jsx("button",{type:"button",onClick:()=>h(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Remove"})]},t)),s.jsx("button",{type:"button",onClick:()=>{l([...n,""])},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Add Task"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Planned For Next Week"}),(0,s.jsxs)("div",{className:"space-y-2",children:[i.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:e,onChange:e=>j(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Task ${t+1}`}),s.jsx("button",{type:"button",onClick:()=>f(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Remove"})]},t)),s.jsx("button",{type:"button",onClick:()=>{d([...i,""])},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Add Task"})]})]}),s.jsx("div",{children:(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Goals Achieved"})]})}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),s.jsx("textarea",{value:m,onChange:e=>x(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[s.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50",children:p?"Saving...":"Save Changes"})]})]})]})]})})}function l(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function i({progress:e,canEdit:t}){let r=(0,o.useRouter)(),[i,d]=(0,a.useState)(!1),c=new Date(e.weekStartDate),u=new Date(e.weekEndDate),m=function(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),r=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-r);let s=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((t.getTime()-s.getTime())/864e5+1)/7)}(c),x=JSON.parse(e.completedThisWeek||"[]"),p=JSON.parse(e.plannedForNextWeek||"[]");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"font-bold text-gray-900 mb-1",children:["Week ",m,", ",c.getFullYear()]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[l(c)," - ",l(u)]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${e.goalsAchieved?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:e.goalsAchieved?"✓ Achieved":"✗ Not Achieved"}),t&&s.jsx("button",{onClick:()=>d(!0),className:"px-3 py-1 text-xs font-semibold text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:"Edit"})]})]}),x.length>0&&(0,s.jsxs)("div",{className:"mb-2",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Completed:"}),s.jsx("ul",{className:"text-sm text-gray-700 space-y-1",children:x.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-green-500 mr-2",children:"✓"}),s.jsx("span",{children:e})]},t))})]}),p.length>0&&(0,s.jsxs)("div",{children:[s.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Planned:"}),s.jsx("ul",{className:"text-sm text-gray-700 space-y-1",children:p.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start",children:[s.jsx("span",{className:"text-blue-500 mr-2",children:"→"}),s.jsx("span",{children:e})]},t))})]}),e.notes&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:s.jsx("p",{className:"text-sm text-gray-600 italic",children:e.notes})})]}),i&&s.jsx(n,{progressId:e.id,initialData:{completedThisWeek:x,plannedForNextWeek:p,goalsAchieved:e.goalsAchieved,notes:e.notes},onClose:()=>d(!1),onSuccess:e=>{r.refresh()}})]})}},30578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(19899);function a({isOpen:e,title:t,message:r,confirmText:a="Confirm",cancelText:o="Cancel",onConfirm:n,onCancel:l,type:i="info",isLoading:d=!1}){return e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:l}),(0,s.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all",children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t}),s.jsx("p",{className:"text-gray-600",children:r})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[s.jsx("button",{onClick:l,disabled:d,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o}),s.jsx("button",{onClick:n,disabled:d,className:`px-4 py-2 text-white ${"danger"===i?"bg-red-600 hover:bg-red-700":"warning"===i?"bg-yellow-600 hover:bg-yellow-700":"bg-blue-600 hover:bg-blue-700"} rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:d?"Deleting...":a})]})]})]})}):null}},28814:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(19899);function a({message:e,type:t="info",isVisible:r,onClose:a,duration:o=3e3}){return r?s.jsx("div",{className:"fixed top-20 right-4 z-50 animate-in slide-in-from-right",children:(0,s.jsxs)("div",{className:`${"success"===t?"bg-green-500":"error"===t?"bg-red-500":"bg-blue-500"} text-white px-6 py-4 rounded-lg shadow-2xl flex items-center space-x-3 min-w-[300px] max-w-md`,children:[s.jsx("div",{className:"flex-1",children:s.jsx("p",{className:"font-medium",children:e})}),s.jsx("button",{onClick:a,className:"text-white hover:text-gray-200 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}r(5507)},48617:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,dynamic:()=>p});var s=r(35023),a=r(19737),o=r(1130),n=r(4573),l=r(10682),i=r(48262),d=r(14389),c=r(2772);let u=(0,c.createProxy)(String.raw`C:\Users\This PC\Downloads\new-project-main\app\projects\[id]\ProjectActions.tsx#default`),m=(0,c.createProxy)(String.raw`C:\Users\This PC\Downloads\new-project-main\app\projects\[id]\MilestoneActions.tsx#default`),x=(0,c.createProxy)(String.raw`C:\Users\This PC\Downloads\new-project-main\app\projects\[id]\WeeklyProgressItem.tsx#default`),p="force-dynamic";async function g({params:e}){let t=await (0,i.getServerSession)(d.L);t?.user?.email||(0,a.redirect)("/login");let r=await o._.project.findUnique({where:{id:e.id},include:{milestones:{include:{weeklyProgress:{orderBy:{weekStartDate:"desc"}}}}}});r||(0,a.notFound)();let c=t.user.role||"user",p=r.createdBy,g="manager"===c||null!==p&&p===t.user.email;g||p?g||(0,a.redirect)("/projects"):"manager"!==c&&(0,a.redirect)("/projects");let h=[...r.milestones].sort((e,t)=>e.isCurrent&&!t.isCurrent?-1:!e.isCurrent&&t.isCurrent?1:e.targetDate&&t.targetDate?new Date(e.targetDate).getTime()-new Date(t.targetDate).getTime():e.targetDate?-1:t.targetDate?1:new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),b=r.milestones.find(e=>e.isCurrent),f=0===new Date().getDay(),j=b?.weeklyProgress||[];return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[s.jsx(n.Z,{}),s.jsx("div",{className:"container mx-auto px-3 sm:px-4 py-4 sm:py-6 lg:py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"mb-6",children:(0,s.jsxs)(l.default,{href:"/projects",className:"inline-flex items-center text-blue-600 hover:text-blue-800 mb-4 font-medium transition-colors",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Projects"]})}),s.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8 border border-gray-100",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between mb-6 gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4 mb-4",children:[s.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 break-words",children:r.name}),s.jsx("span",{className:`px-3 sm:px-4 py-1.5 text-xs sm:text-sm font-semibold rounded-full whitespace-nowrap self-start ${"active"===r.status?"bg-green-100 text-green-800 border border-green-200":"completed"===r.status?"bg-gray-100 text-gray-800 border border-gray-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"}`,children:r.status})]}),r.description&&s.jsx("p",{className:"text-gray-600 mb-4 sm:mb-6 text-base sm:text-lg leading-relaxed break-words",children:r.description}),(0,s.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 sm:p-6 border border-blue-100",children:[s.jsx("h3",{className:"text-xs sm:text-sm font-semibold text-gray-600 mb-2 uppercase tracking-wide",children:"Major Goal"}),s.jsx("p",{className:"text-lg sm:text-xl text-gray-900 font-semibold leading-relaxed break-words",children:r.majorGoal})]}),s.jsx(u,{projectId:r.id,projectName:r.name,projectDescription:r.description,projectMajorGoal:r.majorGoal,projectStatus:r.status,canEdit:g})]}),s.jsx("div",{className:"flex flex-col gap-3",children:(0,s.jsxs)(l.default,{href:`/projects/${r.id}/milestones/new`,className:"w-full sm:w-auto bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 sm:px-6 py-2.5 sm:py-3 rounded-xl hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-semibold flex items-center justify-center sm:ml-6",children:[s.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),s.jsx("span",{className:"hidden sm:inline",children:"Add Milestone"}),s.jsx("span",{className:"sm:hidden",children:"Add"})]})})]})}),f&&b&&s.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-2xl shadow-xl p-4 sm:p-6 mb-6 sm:mb-8 text-white",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-xl sm:text-2xl font-bold mb-2",children:"It's Sunday! Time to track weekly progress"}),s.jsx("p",{className:"text-blue-100 mb-4 text-sm sm:text-base",children:"Record what you completed last week and plan for next week."})]}),s.jsx(l.default,{href:`/weekly-progress/new?milestoneId=${b.id}`,className:"w-full sm:w-auto bg-white text-blue-600 px-6 py-3 rounded-xl hover:bg-gray-50 transition-colors font-semibold text-center sm:text-left",children:"Create Weekly Report"})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8 border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-4 sm:mb-6 flex items-center",children:[s.jsx("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 mr-2 sm:mr-3 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Milestones"]}),0===h.length?s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500 text-lg",children:"No milestones yet. Create one to get started."})}):s.jsx("div",{className:"space-y-4",children:h.map(e=>{let t=e.weeklyProgress.length;return(0,s.jsxs)("div",{className:`rounded-xl p-4 sm:p-6 border-2 transition-all duration-200 ${e.isCurrent?"border-blue-500 bg-gradient-to-br from-blue-50 to-indigo-50 shadow-lg":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md"}`,children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-3 flex-wrap",children:[s.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 break-words",children:e.title}),e.isCurrent&&s.jsx("span",{className:"px-3 py-1 text-xs font-bold bg-blue-600 text-white rounded-full uppercase tracking-wide",children:"Current"}),s.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${"completed"===e.status?"bg-green-100 text-green-800 border border-green-200":"in-progress"===e.status?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-gray-100 text-gray-800 border border-gray-200"}`,children:e.status}),s.jsx(m,{milestoneId:e.id,currentStatus:e.status,canEdit:g})]}),e.description&&s.jsx("p",{className:"text-gray-600 mb-3 leading-relaxed",children:e.description}),e.targetDate&&(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mt-2",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Target: ",new Date(e.targetDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]})}),e.isCurrent&&e.weeklyProgress.length>0&&(0,s.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[(0,s.jsxs)("h4",{className:"text-sm font-bold text-gray-700 mb-4 uppercase tracking-wide",children:["Recent Weekly Progress (",t," total)"]}),s.jsx("div",{className:"grid gap-3",children:e.weeklyProgress.slice(0,3).map(e=>s.jsx(x,{progress:e,canEdit:g},e.id))})]})]},e.id)})})]}),b&&j.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[(0,s.jsxs)("h2",{className:"text-3xl font-bold text-gray-900 mb-6 flex items-center",children:[s.jsx("svg",{className:"w-8 h-8 mr-3 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Weekly Progress History"]}),s.jsx("div",{className:"grid gap-4",children:j.map(e=>s.jsx(x,{progress:e,canEdit:g},e.id))})]}),b&&0===j.length&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100 text-center",children:[s.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Weekly Progress History"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No weekly progress reports yet for the current milestone."}),s.jsx(l.default,{href:`/weekly-progress/new?milestoneId=${b.id}`,className:"inline-flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transition-all font-semibold",children:"Create First Report"})]})]})})]})}},19737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ReadonlyURLSearchParams:function(){return n},RedirectType:function(){return s.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return s.permanentRedirect},redirect:function(){return s.redirect}});let s=r(81167),a=r(14440);class o extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new o}delete(){throw new o}set(){throw new o}sort(){throw new o}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return a},notFound:function(){return s}});let r="NEXT_NOT_FOUND";function s(){let e=Error(r);throw e.digest=r,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6550:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return r}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81167:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RedirectType:function(){return s},getRedirectError:function(){return i},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return x},getURLFromRedirectError:function(){return m},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return d}});let a=r(54580),o=r(72934),n=r(6550),l="NEXT_REDIRECT";function i(e,t,r){void 0===r&&(r=n.RedirectStatusCode.TemporaryRedirect);let s=Error(l);s.digest=l+";"+t+";"+e+";"+r+";";let o=a.requestAsyncStorage.getStore();return o&&(s.mutableCookies=o.mutableCookies),s}function d(e,t){void 0===t&&(t="replace");let r=o.actionAsyncStorage.getStore();throw i(e,t,(null==r?void 0:r.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let r=o.actionAsyncStorage.getStore();throw i(e,t,(null==r?void 0:r.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,r,s,a]=e.digest.split(";",4),o=Number(a);return t===l&&("replace"===r||"push"===r)&&"string"==typeof s&&!isNaN(o)&&o in n.RedirectStatusCode}function m(e){return u(e)?e.digest.split(";",3)[2]:null}function x(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[942,425,958,138,679],()=>r(91875));module.exports=s})();