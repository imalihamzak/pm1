(()=>{var e={};e.id=948,e.ids=[948],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},22641:e=>{"use strict";e.exports=require("assert")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},86624:e=>{"use strict";e.exports=require("querystring")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},91875:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),s(43522),s(2723),s(12874);var r=s(27105),a=s(15265),l=s(90157),n=s.n(l),i=s(44665),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let d=["",{children:["projects",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,43522)),"C:\\Users\\This PC\\Downloads\\new-project-main\\app\\projects\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2723)),"C:\\Users\\This PC\\Downloads\\new-project-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,12874,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\This PC\\Downloads\\new-project-main\\app\\projects\\[id]\\page.tsx"],u="/projects/[id]/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/projects/[id]/page",pathname:"/projects/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},28657:(e,t,s)=>{Promise.resolve().then(s.bind(s,14470)),Promise.resolve().then(s.bind(s,59032)),Promise.resolve().then(s.bind(s,18502)),Promise.resolve().then(s.bind(s,8476)),Promise.resolve().then(s.bind(s,6043)),Promise.resolve().then(s.t.bind(s,50696,23))},14470:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var r=s(19899),a=s(5507),l=s(54175),n=s(76153),i=s(60878),o=s(28814),d=s(30578);function c({projectId:e,initialData:t,onClose:s,onSuccess:l}){let[n,i]=(0,a.useState)(t),[d,c]=(0,a.useState)(!1),[u,x]=(0,a.useState)({message:"",type:"info",isVisible:!1}),m=(e,t="info")=>{x({message:e,type:t,isVisible:!0})},p=async t=>{t.preventDefault(),c(!0);try{let t=await fetch(`/api/projects/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(t.ok)l("Project updated successfully!"),s();else{let e=await t.json();m(e.error||"Failed to update project","error")}}catch(e){console.error("Error updating project:",e),m("Error updating project","error")}finally{c(!1)}};return(0,r.jsxs)("div",{className:"fixed inset-0 z-[100] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 relative z-[101]",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-[100]",onClick:s}),(0,r.jsxs)("div",{className:"relative bg-white rounded-2xl max-w-2xl w-full p-6 border border-slate-200 z-[102]",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Edit Project"}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name *"}),r.jsx("input",{type:"text",required:!0,value:n.name,onChange:e=>i({...n,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:n.description,onChange:e=>i({...n,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Major Goal *"}),r.jsx("textarea",{required:!0,value:n.majorGoal,onChange:e=>i({...n,majorGoal:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,r.jsxs)("select",{value:n.status,onChange:e=>i({...n,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"on-hold",children:"On Hold"})]})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50",children:d?"Saving...":"Save Changes"})]})]})]})]}),r.jsx(o.Z,{message:u.message,type:u.type,isVisible:u.isVisible,onClose:()=>x({...u,isVisible:!1})})]})}function u({projectId:e,projectName:t,projectDescription:s,projectMajorGoal:l,projectStatus:u,canEdit:x}){let m=(0,n.useRouter)(),{data:p}=(0,i.useSession)(),[h,g]=(0,a.useState)(!1),[b,j]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),[v,N]=(0,a.useState)({message:"",type:"info",isVisible:!1}),w=(e,t="info")=>{N({message:e,type:t,isVisible:!0})},k=async()=>{y(!0);try{let t=await fetch(`/api/projects/${e}`,{method:"DELETE"});if(t.ok)w("Project deleted successfully!","success"),setTimeout(()=>{m.push("/projects")},1e3);else{let e=await t.json();w(e.error||"Failed to delete project","error"),j(!1)}}catch(e){console.error("Error deleting project:",e),w("Error deleting project","error"),j(!1)}finally{y(!1)}};return x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>g(!0),className:"p-2.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",title:"Edit Project",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("button",{onClick:()=>j(!0),className:"p-2.5 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors border border-gray-200",title:"Delete Project",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),h&&r.jsx(c,{projectId:e,initialData:{name:t,description:s||"",majorGoal:l,status:u},onClose:()=>{g(!1),m.refresh()},onSuccess:e=>{w(e,"success"),m.refresh()}}),r.jsx(d.Z,{isOpen:b,title:"Delete Project",message:"Are you sure you want to delete this project? All milestones and related data will be deleted. This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",type:"danger",isLoading:f,onConfirm:k,onCancel:()=>j(!1)}),r.jsx(o.Z,{message:v.message,type:v.type,isVisible:v.isVisible,onClose:()=>N({...v,isVisible:!1})})]}):null}function x({projectId:e,projectName:t,projectDescription:s,projectMajorGoal:i,projectStatus:o,canEdit:d}){(0,n.usePathname)();let[c,x]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"flex items-start gap-3 flex-shrink-0",children:[d&&r.jsx(u,{projectId:e,projectName:t,projectDescription:s,projectMajorGoal:i,projectStatus:o,canEdit:d}),(0,r.jsxs)(l.default,{href:`/projects/${e}/milestones/new`,onClick:()=>x(!0),className:`inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-medium ${c?"opacity-75 cursor-wait":""}`,children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{children:"Add Milestone"}),c&&(0,r.jsxs)("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})]})}},59032:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(19899),a=s(5507),l=s(76153),n=s(28814);function i({milestoneId:e,currentStatus:t,isCurrent:s,canEdit:i}){let o=(0,l.useRouter)(),[d,c]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),[m,p]=(0,a.useState)({message:"",type:"info",isVisible:!1}),h=(e,t="info")=>{p({message:e,type:t,isVisible:!0})},g=async()=>{if("completed"===t){h("Milestone is already completed","info");return}c(!0);try{let t=await fetch(`/api/milestones/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"completed"})});if(t.ok)h("Milestone marked as completed!","success"),o.refresh();else{let e=await t.json();h(e.error||"Failed to update milestone","error")}}catch(e){console.error("Error updating milestone:",e),h("Error updating milestone","error")}finally{c(!1)}},b=async()=>{x(!0);try{let t=await fetch(`/api/milestones/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isCurrent:!s})});if(t.ok)h(s?"Milestone removed from current milestones":"Milestone marked as current!","success"),o.refresh();else{let e=await t.json();h(e.error||"Failed to update milestone","error")}}catch(e){console.error("Error updating milestone:",e),h("Error updating milestone","error")}finally{x(!1)}};return i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:["completed"!==t&&r.jsx("button",{onClick:g,disabled:d||u,className:"px-3 py-1.5 text-xs font-medium text-green-700 bg-green-50 hover:bg-green-100 border border-green-200 rounded-lg transition-colors whitespace-nowrap disabled:opacity-50",children:d?"Updating...":"Mark Complete"}),r.jsx("button",{onClick:b,disabled:d||u,className:`px-3 py-1.5 text-xs font-medium border rounded-lg transition-colors whitespace-nowrap disabled:opacity-50 ${s?"text-blue-700 bg-blue-50 hover:bg-blue-100 border-blue-200":"text-gray-700 bg-gray-50 hover:bg-gray-100 border-gray-200"}`,children:u?"Updating...":s?"Remove Current":"Set Current"})]}),r.jsx(n.Z,{message:m.message,type:m.type,isVisible:m.isVisible,onClose:()=>p({...m,isVisible:!1})})]}):null}},18502:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var r=s(19899),a=s(5507),l=s(76153),n=s(28814);function i({progressId:e,initialData:t,onClose:s,onSuccess:l}){let[i,o]=(0,a.useState)(t.completedThisWeek),[d,c]=(0,a.useState)(t.plannedForNextWeek),[u,x]=(0,a.useState)(t.taskDelays||i.map(e=>({task:e,isCompleted:!1,delayReasons:[]}))),[m,p]=(0,a.useState)(t.goalsAchieved),[h,g]=(0,a.useState)(t.notes||""),[b,j]=(0,a.useState)(!1),[f,y]=(0,a.useState)({message:"",type:"info",isVisible:!1}),v=(e,t="info")=>{y({message:e,type:t,isVisible:!0})},N=e=>{o(i.filter((t,s)=>s!==e)),x(u.filter((t,s)=>s!==e))},w=(e,t)=>{let s=[...i];s[e]=t,o(s);let r=[...u];r[e]?r[e]={...r[e],task:t}:r[e]={task:t,isCompleted:!1,delayReasons:[]},x(r)},k=e=>{c(d.filter((t,s)=>s!==e)),x(u.filter((t,s)=>s!==e))},C=(e,t)=>{let s=[...d];s[e]=t,c(s)},S=(e,t)=>{let s=[...u];s[e]||(s[e]={task:i[e]||"",isCompleted:!1,delayReasons:[]}),s[e]={...s[e],isCompleted:t},t&&(s[e].delayReasons=[],s[e].delayReasonText=void 0),x(s)},D=(e,t)=>{let s=[...u];s[e]||(s[e]={task:i[e]||"",isCompleted:!1,delayReasons:[]});let r=s[e].delayReasons||[];r.includes(t)?(s[e].delayReasons=r.filter(e=>e!==t),"other"===t&&(s[e].delayReasonText=void 0)):s[e].delayReasons=[...r,t],x(s)},P=(e,t)=>{let s=[...u];s[e]||(s[e]={task:i[e]||"",isCompleted:!1,delayReasons:[]}),s[e]={...s[e],delayReasonText:t},x(s)},T=async t=>{t.preventDefault(),j(!0);try{let t=await fetch(`/api/weekly-progress/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({completedThisWeek:JSON.stringify(i.filter(e=>""!==e.trim())),plannedForNextWeek:JSON.stringify(d.filter(e=>""!==e.trim())),taskDelays:JSON.stringify(u.filter((e,t)=>i[t]?.trim()!=="")),goalsAchieved:m,notes:h.trim()||null})});if(t.ok)v("Weekly progress updated successfully!","success"),setTimeout(()=>{l("Weekly progress updated successfully!"),s()},1e3);else{let e=await t.json();v(e.error||"Failed to update weekly progress","error")}}catch(e){console.error("Error updating weekly progress:",e),v("Error updating weekly progress","error")}finally{j(!1)}};return(0,r.jsxs)("div",{className:"fixed inset-0 z-[100] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex min-h-screen items-start justify-center pt-20 pb-8 px-4 relative z-[101]",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-[100]",onClick:s}),(0,r.jsxs)("div",{className:"relative bg-white rounded-2xl max-w-3xl w-full p-6 max-h-[calc(100vh-8rem)] overflow-y-auto border border-slate-200 z-[102] [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Edit Weekly Progress"}),(0,r.jsxs)("form",{onSubmit:T,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Completed This Week"}),(0,r.jsxs)("div",{className:"space-y-3",children:[i.map((e,t)=>{let s=u[t]||{task:e,isCompleted:!1,delayReasons:[]},a=s.isCompleted||!1,l=s.delayReasons||[];return(0,r.jsxs)("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex gap-2 mb-3",children:[r.jsx("input",{type:"text",value:e,onChange:e=>w(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white",placeholder:`Task ${t+1}`}),r.jsx("button",{type:"button",onClick:()=>N(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Remove"})]}),r.jsx("div",{className:"mb-3",children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:a,onChange:e=>S(t,e.target.checked),className:"mr-2 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Task completed"})]})}),!a&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-300",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Delay Reason (if not completed):"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:l.includes("client"),onChange:()=>D(t,"client"),className:"mr-2 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Delayed by client"})]}),(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:l.includes("developer"),onChange:()=>D(t,"developer"),className:"mr-2 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Delayed by developer"})]}),(0,r.jsxs)("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:l.includes("other"),onChange:()=>D(t,"other"),className:"mr-2 w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 cursor-pointer"}),r.jsx("span",{className:"text-sm text-gray-700",children:"Other reason"})]}),l.includes("other")&&r.jsx("textarea",{value:s.delayReasonText||"",onChange:e=>P(t,e.target.value),className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Please justify the reason for delay...",rows:2})]})]})]},t)}),r.jsx("button",{type:"button",onClick:()=>{o([...i,""]),x([...u,{task:"",isCompleted:!1,delayReasons:[]}])},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Add Task"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Planned For Next Week"}),(0,r.jsxs)("div",{className:"space-y-2",children:[d.map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:e,onChange:e=>C(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Task ${t+1}`}),r.jsx("button",{type:"button",onClick:()=>k(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:"Remove"})]},t)),r.jsx("button",{type:"button",onClick:()=>{c([...d,""]),x([...u,{task:"",isCompleted:!1}])},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Add Task"})]})]}),r.jsx("div",{children:(0,r.jsxs)("label",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"checkbox",checked:m,onChange:e=>p(e.target.checked),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Goals Achieved"})]})}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),r.jsx("textarea",{value:h,onChange:e=>g(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end pt-4",children:[r.jsx("button",{type:"button",onClick:s,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium transition-colors disabled:opacity-50",children:b?"Saving...":"Save Changes"})]})]})]})]}),r.jsx(n.Z,{message:f.message,type:f.type,isVisible:f.isVisible,onClose:()=>y({...f,isVisible:!1})})]})}function o(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function d({progress:e,canEdit:t,projectStartDate:s}){let n=(0,l.useRouter)(),[d,c]=(0,a.useState)(!1),u=new Date(e.weekStartDate),x=new Date(e.weekEndDate),m=function(e,t=new Date){let s=new Date(e);s.setHours(0,0,0,0);let r=new Date(t);r.setHours(0,0,0,0);let a=s.getDay(),l=new Date(s);l.setDate(s.getDate()-a),l.setHours(0,0,0,0);let n=r.getDay(),i=new Date(r);return i.setDate(r.getDate()-n),i.setHours(0,0,0,0),Math.max(1,Math.floor((i.getTime()-l.getTime())/6048e5)+1)}(new Date(s),u),p=function(e){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),s=t.getUTCDay()||7;t.setUTCDate(t.getUTCDate()+4-s);let r=new Date(Date.UTC(t.getUTCFullYear(),0,1)),a=Math.ceil(((t.getTime()-r.getTime())/864e5+1)/7),l=t.getUTCFullYear();return`${l}-W${a.toString().padStart(2,"0")}`}(u),h=JSON.parse(e.completedThisWeek||"[]"),g=JSON.parse(e.plannedForNextWeek||"[]"),b=e.taskDelays?JSON.parse(e.taskDelays):[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 hover:border-gray-300 transition-colors",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsxs)("div",{className:"text-sm font-semibold text-gray-900",children:["Week ",m," (",p,")"]}),r.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full ${e.goalsAchieved?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.goalsAchieved?"✓ Achieved":"✗ Not Achieved"})]}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[o(u)," - ",o(x)]})]}),t&&r.jsx("button",{onClick:()=>c(!0),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Edit Progress",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),(h.length>0||g.length>0)&&(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[h.length>0&&(0,r.jsxs)("div",{className:"bg-green-50 rounded border border-green-200 p-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"text-xs font-semibold text-green-700 uppercase",children:"Completed"})]}),(0,r.jsxs)("ul",{className:"space-y-1",children:[h.slice(0,2).map((e,t)=>{let s=b.find(t=>t.task===e),a=s?.isCompleted??!0,l=s&&!a&&s.delayReasons&&s.delayReasons.length>0;return r.jsx("li",{className:"text-xs text-gray-700",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("span",{className:`mr-1.5 mt-0.5 ${a?"text-green-600":l?"text-red-600":"text-yellow-600"}`,children:a?"✓":l?"⚠":"○"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("span",{className:a?"":"text-gray-600",children:e}),l&&(0,r.jsxs)("div",{className:"mt-1 ml-4 text-xs text-red-600",children:[r.jsx("span",{className:"font-medium",children:s.delayReasons?.map((e,t)=>({client:"Delayed by client",developer:"Delayed by developer",other:"Other reason"})[e]||e).join(", ")}),s.delayReasonText&&r.jsx("span",{className:"block mt-0.5 text-gray-600",children:s.delayReasonText})]})]})]})},t)}),h.length>2&&(0,r.jsxs)("li",{className:"text-xs text-gray-500",children:["+",h.length-2," more"]})]})]}),g.length>0&&(0,r.jsxs)("div",{className:"bg-blue-50 rounded border border-blue-200 p-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),r.jsx("span",{className:"text-xs font-semibold text-blue-700 uppercase",children:"Planned"})]}),(0,r.jsxs)("ul",{className:"space-y-1",children:[g.slice(0,2).map((e,t)=>(0,r.jsxs)("li",{className:"text-xs text-gray-700 flex items-start",children:[r.jsx("span",{className:"text-blue-600 mr-1.5 mt-0.5",children:"•"}),r.jsx("span",{className:"line-clamp-1",children:e})]},t)),g.length>2&&(0,r.jsxs)("li",{className:"text-xs text-gray-500",children:["+",g.length-2," more"]})]})]})]}),e.notes&&r.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:r.jsx("p",{className:"text-xs text-gray-600 italic line-clamp-2",children:e.notes})})]}),d&&r.jsx(i,{progressId:e.id,initialData:{completedThisWeek:h,plannedForNextWeek:g,taskDelays:b,goalsAchieved:e.goalsAchieved,notes:e.notes},onClose:()=>c(!1),onSuccess:e=>{n.refresh()}})]})}},8476:(e,t,s)=>{"use strict";s.d(t,{default:()=>i});var r=s(19899),a=s(5507),l=s(54175),n=s(76153);function i({href:e,children:t,className:s="",variant:i="link"}){(0,n.usePathname)();let[o,d]=(0,a.useState)(!1);return(0,r.jsxs)(l.default,{href:e,onClick:()=>d(!0),className:`${"button"===i?"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg transition-colors":""} ${"link"===i?"inline-flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700 font-medium":""} ${s} ${o?"opacity-75 cursor-wait pointer-events-none":""}`,children:[t,o&&(0,r.jsxs)("svg",{className:"w-4 h-4 animate-spin ml-1",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})}},30578:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(19899);function a({isOpen:e,title:t,message:s,confirmText:a="Confirm",cancelText:l="Cancel",onConfirm:n,onCancel:i,type:o="info",isLoading:d=!1}){return e?r.jsx("div",{className:"fixed inset-0 z-[100] overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4 relative z-[101]",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity z-[100]",onClick:i}),(0,r.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all z-[102]",children:[(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t}),r.jsx("p",{className:"text-gray-600",children:s})]}),(0,r.jsxs)("div",{className:"flex gap-3 justify-end",children:[r.jsx("button",{onClick:i,disabled:d,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l}),r.jsx("button",{onClick:n,disabled:d,className:`px-4 py-2 text-white ${"danger"===o?"bg-red-600 hover:bg-red-700":"warning"===o?"bg-yellow-600 hover:bg-yellow-700":"bg-blue-600 hover:bg-blue-700"} rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:d?"Deleting...":a})]})]})]})}):null}},28814:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(19899);function a({message:e,type:t="info",isVisible:s,onClose:a,duration:l=3e3}){return s?r.jsx("div",{className:"fixed top-20 right-4 z-50 animate-in slide-in-from-right",children:(0,r.jsxs)("div",{className:`${"success"===t?"bg-green-500":"error"===t?"bg-red-500":"bg-blue-500"} text-white px-6 py-4 rounded-lg shadow-2xl flex items-center space-x-3 min-w-[300px] max-w-md`,children:[r.jsx("div",{className:"flex-1",children:r.jsx("p",{className:"font-medium",children:e})}),r.jsx("button",{onClick:a,className:"text-white hover:text-gray-200 transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}s(5507)},43522:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g,dynamic:()=>h});var r=s(35023),a=s(19737),l=s(1130),n=s(4573),i=s(10682),o=s(48262),d=s(14389),c=s(2772);let u=(0,c.createProxy)(String.raw`C:\Users\This PC\Downloads\new-project-main\app\projects\[id]\ActionButtons.tsx#default`),x=(0,c.createProxy)(String.raw`C:\Users\This PC\Downloads\new-project-main\app\projects\[id]\MilestoneActions.tsx#default`),m=(0,c.createProxy)(String.raw`C:\Users\This PC\Downloads\new-project-main\app\projects\[id]\WeeklyProgressItem.tsx#default`),p=(0,c.createProxy)(String.raw`C:\Users\This PC\Downloads\new-project-main\app\projects\[id]\WeeklyProgressLink.tsx#default`),h="force-dynamic";async function g({params:e}){let t=await (0,o.getServerSession)(d.L);t?.user?.email||(0,a.redirect)("/login");let s=await l._.project.findUnique({where:{id:e.id},include:{milestones:{include:{weeklyProgress:{orderBy:{weekStartDate:"desc"}}}}}});s||(0,a.notFound)();let c=t.user.role||"user",h=s.createdBy,g="manager"===c||null!==h&&h===t.user.email;g||h?g||(0,a.redirect)("/projects"):"manager"!==c&&(0,a.redirect)("/projects");let b=[...s.milestones].sort((e,t)=>e.isCurrent&&!t.isCurrent?-1:!e.isCurrent&&t.isCurrent?1:e.targetDate&&t.targetDate?new Date(e.targetDate).getTime()-new Date(t.targetDate).getTime():e.targetDate?-1:t.targetDate?1:new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()),j=s.milestones.filter(e=>e.isCurrent),f=0===new Date().getDay(),y=j.flatMap(e=>e.weeklyProgress||[]),v=s.milestones.length,N=s.milestones.filter(e=>"completed"===e.status).length;return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(n.Z,{}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsxs)(i.default,{href:"/projects",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Projects"]})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 mb-6",children:(0,r.jsxs)("div",{className:"px-6 py-8",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-6",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:s.name}),r.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${"active"===s.status?"bg-green-100 text-green-800":"completed"===s.status?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:s.status.toUpperCase()})]}),s.description&&r.jsx("p",{className:"text-lg text-gray-600 mb-6",children:s.description}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Total Milestones"}),r.jsx("div",{className:"text-3xl font-bold text-gray-900",children:v})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Completed"}),r.jsx("div",{className:"text-3xl font-bold text-green-600",children:N})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-100",children:[r.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Progress"}),(0,r.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[v>0?Math.round(N/v*100):0,"%"]})]})]})]}),r.jsx(u,{projectId:s.id,projectName:s.name,projectDescription:s.description,projectMajorGoal:s.majorGoal,projectStatus:s.status,canEdit:g})]}),(0,r.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Major Goal"})]}),r.jsx("p",{className:"text-xl text-gray-700 leading-relaxed",children:s.majorGoal})]})]})}),f&&j.length>0&&r.jsx("div",{className:"bg-blue-600 rounded-lg p-6 mb-6 text-white",children:(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-xl font-semibold",children:"It's Sunday!"})]}),(0,r.jsxs)("p",{className:"text-blue-100",children:["Time to track your weekly progress. ",j.length>1&&`You have ${j.length} active milestones.`]})]}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:j.map(e=>(0,r.jsxs)(p,{href:`/weekly-progress/new?milestoneId=${e.id}`,variant:"button",className:"w-full sm:w-auto justify-center bg-white text-blue-600 hover:bg-blue-50 transform hover:scale-105 font-medium",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{children:j.length>1?e.title:"Create Report"})]},e.id))})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"px-6 py-5 border-b border-gray-200",children:r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Milestones"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[b.length," milestone",1!==b.length?"s":""]})]})]})})}),r.jsx("div",{className:"p-6",children:0===b.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"No milestones yet"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Create your first milestone to get started"})]}):r.jsx("div",{className:"space-y-4",children:b.map(e=>{let t=e.weeklyProgress.length;return(0,r.jsxs)("div",{className:`rounded-lg border-2 p-5 transition-all ${e.isCurrent?"border-blue-300 bg-blue-50":"border-gray-200 bg-white"}`,children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),e.isCurrent&&r.jsx("span",{className:"px-2 py-1 text-xs font-semibold bg-blue-600 text-white rounded-full",children:"CURRENT"}),r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${"completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:e.status})]}),e.description&&r.jsx("p",{className:"text-gray-600 mb-3",children:e.description}),e.targetDate&&(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 text-sm text-gray-600",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Target: ",new Date(e.targetDate).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]}),g&&r.jsx(x,{milestoneId:e.id,currentStatus:e.status,isCurrent:e.isCurrent,canEdit:g})]}),e.isCurrent&&(0,r.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Weekly Progress"})]}),g&&(0,r.jsxs)(p,{href:`/weekly-progress/new?milestoneId=${e.id}`,variant:"button",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{children:"Add Progress"})]})]}),e.weeklyProgress.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"text-xs text-gray-500 mb-3",children:[t," report",1!==t?"s":""]}),r.jsx("div",{className:"space-y-2",children:e.weeklyProgress.slice(0,2).map(e=>r.jsx(m,{progress:{...e,taskDelays:e.taskDelays||null},canEdit:g,projectStartDate:s.createdAt},e.id))})]}):(0,r.jsxs)("div",{className:"text-center py-6 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"No progress reports yet"}),g&&(0,r.jsxs)(p,{href:`/weekly-progress/new?milestoneId=${e.id}`,variant:"link",children:["Create First Report",r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]},e.id)})})})]})}),r.jsx("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 sticky top-6",children:[(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-200",children:[r.jsx("div",{className:"flex items-start justify-between gap-3 mb-3",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Progress History"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[y.length," report",1!==y.length?"s":""]})]})]})}),j.length>0&&r.jsx("div",{className:"space-y-2",children:1===j.length?(0,r.jsxs)(p,{href:`/weekly-progress/new?milestoneId=${j[0].id}`,variant:"button",className:"w-full justify-center bg-blue-600 text-white hover:bg-blue-700 text-sm",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),r.jsx("span",{children:"Add Weekly Progress"})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-xs text-gray-500 font-medium",children:"Add Progress For:"}),j.map(e=>r.jsx(p,{href:`/weekly-progress/new?milestoneId=${e.id}`,variant:"button",className:"block w-full text-center bg-blue-600 text-white hover:bg-blue-700 text-sm",children:e.title},e.id))]})})]}),r.jsx("div",{className:"p-6",children:0===y.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-gray-100 rounded-full mb-3",children:r.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"No progress reports yet"}),j.length>0&&(0,r.jsxs)(p,{href:`/weekly-progress/new?milestoneId=${j[0].id}`,variant:"link",children:["Create First Report",r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}):r.jsx("div",{className:"space-y-3 max-h-[calc(100vh-400px)] overflow-y-auto",children:y.map(e=>r.jsx(m,{progress:{...e,taskDelays:e.taskDelays||null},canEdit:g,projectStartDate:s.createdAt},e.id))})})]})})]})]})]})}},19737:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{ReadonlyURLSearchParams:function(){return n},RedirectType:function(){return r.RedirectType},notFound:function(){return a.notFound},permanentRedirect:function(){return r.permanentRedirect},redirect:function(){return r.redirect}});let r=s(81167),a=s(14440);class l extends Error{constructor(){super("Method unavailable on `ReadonlyURLSearchParams`. Read more: https://nextjs.org/docs/app/api-reference/functions/use-search-params#updating-searchparams")}}class n extends URLSearchParams{append(){throw new l}delete(){throw new l}set(){throw new l}sort(){throw new l}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},14440:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{isNotFoundError:function(){return a},notFound:function(){return r}});let s="NEXT_NOT_FOUND";function r(){let e=Error(s);throw e.digest=s,e}function a(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===s}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6550:(e,t)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RedirectStatusCode",{enumerable:!0,get:function(){return s}}),function(e){e[e.SeeOther=303]="SeeOther",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect"}(s||(s={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},81167:(e,t,s)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{RedirectType:function(){return r},getRedirectError:function(){return o},getRedirectStatusCodeFromError:function(){return p},getRedirectTypeFromError:function(){return m},getURLFromRedirectError:function(){return x},isRedirectError:function(){return u},permanentRedirect:function(){return c},redirect:function(){return d}});let a=s(54580),l=s(72934),n=s(6550),i="NEXT_REDIRECT";function o(e,t,s){void 0===s&&(s=n.RedirectStatusCode.TemporaryRedirect);let r=Error(i);r.digest=i+";"+t+";"+e+";"+s+";";let l=a.requestAsyncStorage.getStore();return l&&(r.mutableCookies=l.mutableCookies),r}function d(e,t){void 0===t&&(t="replace");let s=l.actionAsyncStorage.getStore();throw o(e,t,(null==s?void 0:s.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.TemporaryRedirect)}function c(e,t){void 0===t&&(t="replace");let s=l.actionAsyncStorage.getStore();throw o(e,t,(null==s?void 0:s.isAction)?n.RedirectStatusCode.SeeOther:n.RedirectStatusCode.PermanentRedirect)}function u(e){if("object"!=typeof e||null===e||!("digest"in e)||"string"!=typeof e.digest)return!1;let[t,s,r,a]=e.digest.split(";",4),l=Number(a);return t===i&&("replace"===s||"push"===s)&&"string"==typeof r&&!isNaN(l)&&l in n.RedirectStatusCode}function x(e){return u(e)?e.digest.split(";",3)[2]:null}function m(e){if(!u(e))throw Error("Not a redirect error");return e.digest.split(";",2)[1]}function p(e){if(!u(e))throw Error("Not a redirect error");return Number(e.digest.split(";",4)[3])}(function(e){e.push="push",e.replace="replace"})(r||(r={})),("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[942,425,958,138,679],()=>s(91875));module.exports=r})();