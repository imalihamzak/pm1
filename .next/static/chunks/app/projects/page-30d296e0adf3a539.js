(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{4481:function(e,t,r){Promise.resolve().then(r.bind(r,8422))},8422:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r(7821),a=r(8078),l=r(4542),o=r(7376),n=r(8504),i=r(9162),d=r(6214),c=r(8766);function x(){var e,t;(0,n.useRouter)();let{data:r}=(0,i.useSession)(),[x,m]=(0,a.useState)([]),[u,g]=(0,a.useState)([]),[h,p]=(0,a.useState)(""),[b,f]=(0,a.useState)("all"),[j,y]=(0,a.useState)(!0),[v,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(null),[C,L]=(0,a.useState)({name:"",description:"",majorGoal:"",status:"active"}),[S,M]=(0,a.useState)({message:"",type:"info",isVisible:!1}),[E,O]=(0,a.useState)({isOpen:!1,projectId:null}),[P,B]=(0,a.useState)(null),W=(null==r?void 0:null===(e=r.user)||void 0===e?void 0:e.role)==="manager",I=(null==r?void 0:null===(t=r.user)||void 0===t?void 0:t.email)||"",z=e=>e?"manager@softechinc.ai"===e?"Manager":"nazish@softechinc.ai"===e?"Nazish":"soban@softechinc.ai"===e?"Soban":e:"Unknown",G=e=>e?"manager@softechinc.ai"===e?"bg-blue-100 text-blue-700 border-blue-200":"nazish@softechinc.ai"===e?"bg-purple-100 text-purple-700 border-purple-200":"soban@softechinc.ai"===e?"bg-green-100 text-green-700 border-green-200":"bg-gray-100 text-gray-700 border-gray-200":"bg-gray-100 text-gray-700 border-gray-200",T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";M({message:e,type:t,isVisible:!0})};(0,a.useEffect)(()=>{V()},[]),(0,a.useEffect)(()=>{let e=x;if(W&&"all"!==b&&(e=e.filter(e=>e.createdBy===b)),""!==h.trim()){let t=h.toLowerCase();e=e.filter(e=>{var r;return e.name.toLowerCase().includes(t)||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(t))||e.majorGoal.toLowerCase().includes(t)||e.status.toLowerCase().includes(t)})}g(e)},[h,b,x,W]);let V=async()=>{try{let e=await fetch("/api/projects");if(e.ok){let t=await e.json();console.log("Fetched projects:",t),console.log("Number of projects:",t.length),m(t),g(t)}else{let t=await e.json();console.error("Error response:",t)}}catch(e){console.error("Error fetching projects:",e)}finally{y(!1)}},D=e=>{N(e.id),L({name:e.name,description:e.description||"",majorGoal:e.majorGoal,status:e.status})},H=async()=>{if(v)try{(await fetch("/api/projects/".concat(v),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)})).ok?(N(null),V(),T("Project updated successfully!","success")):T("Failed to update project","error")}catch(e){console.error("Error updating project:",e),T("Error updating project","error")}},F=e=>{O({isOpen:!0,projectId:e})},_=async()=>{if(E.projectId){B(E.projectId);try{(await fetch("/api/projects/".concat(E.projectId),{method:"DELETE"})).ok?(V(),O({isOpen:!1,projectId:null}),T("Project deleted successfully!","success")):(T("Failed to delete project","error"),O({isOpen:!1,projectId:null}))}catch(e){console.error("Error deleting project:",e),T("Error deleting project","error"),O({isOpen:!1,projectId:null})}finally{B(null)}}};return j?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,s.jsx)(o.default,{}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Loading projects..."})})]}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,s.jsx)(o.default,{}),(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"Projects"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage all your projects and track their progress"})]}),(0,s.jsxs)(l.default,{href:"/projects/new",className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-6 py-3 rounded-xl hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 font-semibold flex items-center whitespace-nowrap",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Project"]})]}),(0,s.jsxs)("div",{className:"mb-6 space-y-3",children:[W&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Creator"}),(0,s.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white text-sm",children:[(0,s.jsx)("option",{value:"all",children:"All Projects"}),(0,s.jsx)("option",{value:"manager@softechinc.ai",children:"My Projects"}),(0,s.jsx)("option",{value:"nazish@softechinc.ai",children:"Nazish's Projects"}),(0,s.jsx)("option",{value:"soban@softechinc.ai",children:"Soban's Projects"})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search projects...",value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 pl-10 pr-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"}),(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-400 absolute left-3 top-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),(h||W&&"all"!==b)&&(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Found ",u.length," project",1!==u.length?"s":""]})]}),0===u.length?(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-12 text-center border border-gray-100",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,s.jsx)("p",{className:"text-gray-600 text-lg mb-4",children:h?"No projects found matching your search.":"No projects yet."}),!h&&(0,s.jsxs)(l.default,{href:"/projects/new",className:"inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold",children:["Create your first project",(0,s.jsx)("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:u.map(e=>(0,s.jsx)("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 p-4 sm:p-6 border border-gray-100 transform hover:-translate-y-1 sm:hover:-translate-y-2 group",children:v===e.id?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("input",{type:"text",value:C.name,onChange:e=>L({...C,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-lg font-bold",placeholder:"Project name"}),(0,s.jsx)("textarea",{value:C.description,onChange:e=>L({...C,description:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Description",rows:2}),(0,s.jsx)("input",{type:"text",value:C.majorGoal,onChange:e=>L({...C,majorGoal:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",placeholder:"Major Goal"}),(0,s.jsxs)("select",{value:C.status,onChange:e=>L({...C,status:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"completed",children:"Completed"}),(0,s.jsx)("option",{value:"on-hold",children:"On Hold"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:H,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-semibold",children:"Save"}),(0,s.jsx)("button",{onClick:()=>N(null),className:"flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 font-semibold",children:"Cancel"})]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3 gap-2",children:[(0,s.jsx)(l.default,{href:"/projects/".concat(e.id),className:"flex-1 min-w-0 group-hover:text-blue-600 transition-colors",children:(0,s.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 group-hover:text-blue-600 transition-colors truncate",children:e.name})}),(0,s.jsx)("span",{className:"px-2 sm:px-3 py-1 text-xs font-semibold rounded-full flex-shrink-0 ".concat("active"===e.status?"bg-green-100 text-green-800 border border-green-200":"completed"===e.status?"bg-gray-100 text-gray-800 border border-gray-200":"bg-yellow-100 text-yellow-800 border border-yellow-200"),children:e.status})]}),W&&e.createdBy&&(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)("span",{className:"px-2.5 py-1 text-xs font-medium rounded-full border ".concat(G(e.createdBy)),children:["Created by: ",z(e.createdBy)]})}),!W&&e.createdBy===I&&(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsx)("span",{className:"px-2.5 py-1 text-xs font-medium rounded-full border bg-blue-100 text-blue-700 border-blue-200",children:"My Project"})}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 min-h-[2.5rem]",children:e.description||"No description"}),(0,s.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-100",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-gray-500 mb-1 uppercase tracking-wide",children:"Major Goal"}),(0,s.jsx)("p",{className:"text-sm text-gray-800 font-medium leading-relaxed",children:e.majorGoal})]}),e.milestones.length>0&&(0,s.jsxs)("div",{className:"flex items-center text-sm mb-4",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),(0,s.jsxs)("span",{className:"text-blue-600 font-medium",children:["Current: ",e.milestones[0].title]})]}),0===e.milestones.length&&(0,s.jsx)("div",{className:"flex items-center text-sm text-gray-400 mb-4",children:(0,s.jsx)("span",{children:"No current milestone"})}),(0,s.jsxs)("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100",children:[(0,s.jsx)(l.default,{href:"/projects/".concat(e.id),className:"flex-1 text-center bg-blue-50 text-blue-600 px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-100 font-semibold text-sm sm:text-base transition-colors",children:"View"}),(0,s.jsx)("button",{onClick:()=>D(e),className:"flex-1 bg-gray-100 text-gray-700 px-3 sm:px-4 py-2 rounded-lg hover:bg-gray-200 font-semibold text-sm sm:text-base transition-colors",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>F(e.id),disabled:P===e.id,className:"flex-1 px-3 sm:px-4 py-2 rounded-lg font-semibold text-sm sm:text-base transition-colors ".concat(P===e.id?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-red-50 text-red-600 hover:bg-red-100"),children:P===e.id?"Deleting...":"Delete"})]})]})},e.id))})]})}),(0,s.jsx)(d.Z,{message:S.message,type:S.type,isVisible:S.isVisible,onClose:()=>M({...S,isVisible:!1})}),(0,s.jsx)(c.Z,{isOpen:E.isOpen,title:"Delete Project",message:"Are you sure you want to delete this project? All milestones and related data will be deleted. This action cannot be undone.",confirmText:"Delete",cancelText:"Cancel",type:"danger",isLoading:null!==P,onConfirm:_,onCancel:()=>O({isOpen:!1,projectId:null})})]})}},8766:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(7821);function a(e){let{isOpen:t,title:r,message:a,confirmText:l="Confirm",cancelText:o="Cancel",onConfirm:n,onCancel:i,type:d="info",isLoading:c=!1}=e;return t?(0,s.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:i}),(0,s.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:r}),(0,s.jsx)("p",{className:"text-gray-600",children:a})]}),(0,s.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,s.jsx)("button",{onClick:i,disabled:c,className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o}),(0,s.jsx)("button",{onClick:n,disabled:c,className:"px-4 py-2 text-white ".concat("danger"===d?"bg-red-600 hover:bg-red-700":"warning"===d?"bg-yellow-600 hover:bg-yellow-700":"bg-blue-600 hover:bg-blue-700"," rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"),children:c?"Deleting...":l})]})]})]})}):null}},7376:function(e,t,r){"use strict";r.d(t,{default:function(){return i}});var s=r(7821),a=r(8078),l=r(4542),o=r(8504),n=r(9162);function i(){var e,t,r;let i=(0,o.usePathname)(),{data:d}=(0,n.useSession)(),[c,x]=(0,a.useState)(!1),m=()=>{x(!1)};return(0,s.jsx)("nav",{className:"bg-white shadow-lg border-b border-gray-200 sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)(l.default,{href:"/",className:"flex items-center space-x-2 sm:space-x-3 group",onClick:m,children:[(0,s.jsx)("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg transform group-hover:scale-110 transition-transform duration-200",children:(0,s.jsx)("span",{className:"text-white font-bold text-base sm:text-lg",children:"S"})}),(0,s.jsx)("span",{className:"text-base sm:text-lg font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Softech Inc"})]}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-1",children:[(0,s.jsx)(l.default,{href:"/",className:"px-3 py-2 rounded-lg font-medium transition-all duration-200 text-sm ".concat("/"===i?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"),children:"Home"}),(0,s.jsx)(l.default,{href:"/projects",className:"px-3 py-2 rounded-lg font-medium transition-all duration-200 text-sm ".concat((null==i?void 0:i.startsWith("/projects"))?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"),children:"Projects"}),(0,s.jsx)(l.default,{href:"/reminders",className:"px-3 py-2 rounded-lg font-medium transition-all duration-200 text-sm ".concat((null==i?void 0:i.startsWith("/reminders"))?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"),children:"Reminders"}),d&&(0,s.jsxs)("div",{className:"ml-4 flex items-center space-x-3 border-l border-gray-200 pl-4",children:[(0,s.jsx)("div",{className:"hidden lg:block text-sm text-gray-600",children:(0,s.jsx)("div",{className:"font-medium text-gray-900 truncate max-w-[150px]",children:null===(e=d.user)||void 0===e?void 0:e.email})}),(0,s.jsx)("button",{onClick:()=>(0,n.signOut)({callbackUrl:"/login"}),className:"px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:"Sign Out"})]})]}),(0,s.jsxs)("div",{className:"md:hidden flex items-center space-x-2",children:[d&&(0,s.jsx)("div",{className:"text-xs text-gray-600 truncate max-w-[100px] hidden sm:block",children:null===(t=d.user)||void 0===t?void 0:t.email}),(0,s.jsx)("button",{onClick:()=>{x(!c)},className:"p-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200","aria-label":"Toggle mobile menu",children:c?(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),c&&(0,s.jsx)("div",{className:"md:hidden border-t border-gray-200 py-4 animate-in slide-in-from-top",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)(l.default,{href:"/",onClick:m,className:"px-4 py-3 rounded-lg font-medium transition-all duration-200 ".concat("/"===i?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"),children:"Home"}),(0,s.jsx)(l.default,{href:"/projects",onClick:m,className:"px-4 py-3 rounded-lg font-medium transition-all duration-200 ".concat((null==i?void 0:i.startsWith("/projects"))?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"),children:"Projects"}),(0,s.jsx)(l.default,{href:"/reminders",onClick:m,className:"px-4 py-3 rounded-lg font-medium transition-all duration-200 ".concat((null==i?void 0:i.startsWith("/reminders"))?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"),children:"Reminders"}),d&&(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4 mt-2",children:[(0,s.jsx)("div",{className:"px-4 py-2 text-sm text-gray-600 mb-2",children:(0,s.jsx)("div",{className:"font-medium text-gray-900 truncate",children:null===(r=d.user)||void 0===r?void 0:r.email})}),(0,s.jsx)("button",{onClick:()=>{m(),(0,n.signOut)({callbackUrl:"/login"})},className:"w-full text-left px-4 py-3 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:"Sign Out"})]})]})})]})})}},6214:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(7821),a=r(8078);function l(e){let{message:t,type:r="info",isVisible:l,onClose:o,duration:n=3e3}=e;return((0,a.useEffect)(()=>{if(l){let e=setTimeout(()=>{o()},n);return()=>clearTimeout(e)}},[l,n,o]),l)?(0,s.jsx)("div",{className:"fixed top-20 right-4 z-50 animate-in slide-in-from-right",children:(0,s.jsxs)("div",{className:"".concat("success"===r?"bg-green-500":"error"===r?"bg-red-500":"bg-blue-500"," text-white px-6 py-4 rounded-lg shadow-2xl flex items-center space-x-3 min-w-[300px] max-w-md"),children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("p",{className:"font-medium",children:t})}),(0,s.jsx)("button",{onClick:o,className:"text-white hover:text-gray-200 transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}):null}}},function(e){e.O(0,[162,35,115,364,744],function(){return e(e.s=4481)}),_N_E=e.O()}]);